{# Reusable UI component macros #}

{#
  Relative datetime component
  Usage: {{ macros::datetime(timestamp=created_at) }}
  Renders an interactive datetime that cycles through relative/local/UTC on click
#}
{% macro datetime(timestamp) %}
<span class="datetime" data-timestamp="{{ timestamp }}"></span>
{% endmacro datetime %}

{#
  Status badge component
  Usage: {{ macros::status_badge(status=run.status) }}
  Renders a color-coded status badge
#}
{% macro status_badge(status) %}
{% if status == "failed" %}
<span class="rounded-full bg-red-100 dark:bg-red-900/50 px-2 py-1 text-xs font-semibold text-red-700 dark:text-red-400">{{ status }}</span>
{% elif status == "completed" %}
<span class="rounded-full bg-emerald-100 dark:bg-emerald-900/50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:text-emerald-400">{{ status }}</span>
{% elif status == "running" or status == "dispatched" %}
<span class="rounded-full bg-amber-100 dark:bg-amber-900/50 px-2 py-1 text-xs font-semibold text-amber-700 dark:text-amber-400">{{ status }}</span>
{% else %}
<span class="rounded-full bg-zinc-200 dark:bg-zinc-800 px-2 py-1 text-xs font-semibold text-zinc-700 dark:text-zinc-300">{{ status }}</span>
{% endif %}
{% endmacro status_badge %}

{#
  Schedule status badge component
  Usage: {{ macros::schedule_badge(status=schedule.status) }}
  Renders a color-coded schedule status badge
#}
{% macro schedule_badge(status) %}
{% if status == "active" %}
<span class="rounded-full bg-emerald-100 dark:bg-emerald-900/50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:text-emerald-400">{{ status }}</span>
{% elif status == "paused" %}
<span class="rounded-full bg-amber-100 dark:bg-amber-900/50 px-2 py-1 text-xs font-semibold text-amber-700 dark:text-amber-400">{{ status }}</span>
{% elif status == "deleted" %}
<span class="rounded-full bg-red-100 dark:bg-red-900/50 px-2 py-1 text-xs font-semibold text-red-700 dark:text-red-400">{{ status }}</span>
{% else %}
<span class="rounded-full bg-zinc-200 dark:bg-zinc-800 px-2 py-1 text-xs font-semibold text-zinc-700 dark:text-zinc-300">{{ status }}</span>
{% endif %}
{% endmacro schedule_badge %}

{#
  Schedule type badge component
  Usage: {{ macros::schedule_type_badge(schedule_type=schedule.schedule_type) }}
  Renders a styled schedule type badge
#}
{% macro schedule_type_badge(schedule_type) %}
{% if schedule_type == "cron" %}
<span class="rounded-full bg-indigo-100 dark:bg-indigo-900/50 px-2 py-1 text-xs font-semibold text-indigo-700 dark:text-indigo-400">cron</span>
{% elif schedule_type == "interval" %}
<span class="rounded-full bg-cyan-100 dark:bg-cyan-900/50 px-2 py-1 text-xs font-semibold text-cyan-700 dark:text-cyan-400">interval</span>
{% else %}
<span class="rounded-full bg-zinc-200 dark:bg-zinc-800 px-2 py-1 text-xs font-semibold text-zinc-700 dark:text-zinc-300">{{ schedule_type }}</span>
{% endif %}
{% endmacro schedule_type_badge %}

{#
  Filterable column header with dropdown
  Usage: {{ macros::filterable_header(label="Workflow", column="workflow", endpoint="/api/invocations/filter-values") }}
  Renders a clickable table header that opens a filter dropdown
#}
{% macro filterable_header(label, column, endpoint) %}
<th class="px-4 py-3 text-left text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400">
    <button
        type="button"
        class="column-filter-btn flex items-center gap-1 hover:text-zinc-700 dark:hover:text-zinc-200 transition-colors cursor-pointer"
        data-column="{{ column }}"
        data-endpoint="{{ endpoint }}"
    >
        {{ label }}
        <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
    </button>
</th>
{% endmacro filterable_header %}
