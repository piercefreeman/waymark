{# Reusable UI component macros #}

{#
  Relative datetime component
  Usage: {{ macros::datetime(timestamp=created_at) }}
  Renders an interactive datetime that cycles through relative/local/UTC on click
#}
{% macro datetime(timestamp) %}
<span class="datetime" data-timestamp="{{ timestamp }}"></span>
{% endmacro datetime %}

{#
  Status badge component
  Usage: {{ macros::status_badge(status=run.status) }}
  Renders a color-coded status badge with border style
#}
{% macro status_badge(status) %}
{% if status == "failed" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-red-500/50 bg-red-500/10 px-2.5 py-1 text-xs font-medium text-red-600 dark:text-red-400">
  <span class="h-1.5 w-1.5 rounded-full bg-red-500"></span>
  {{ status }}
</span>
{% elif status == "completed" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-emerald-500/50 bg-emerald-500/10 px-2.5 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400">
  <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
  {{ status }}
</span>
{% elif status == "running" or status == "dispatched" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-amber-500/50 bg-amber-500/10 px-2.5 py-1 text-xs font-medium text-amber-600 dark:text-amber-400">
  <span class="h-1.5 w-1.5 rounded-full bg-amber-500 animate-pulse"></span>
  {{ status }}
</span>
{% elif status == "queued" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-blue-500/50 bg-blue-500/10 px-2.5 py-1 text-xs font-medium text-blue-600 dark:text-blue-400">
  <span class="h-1.5 w-1.5 rounded-full bg-blue-500"></span>
  {{ status }}
</span>
{% else %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-zinc-400/50 bg-zinc-500/10 px-2.5 py-1 text-xs font-medium text-zinc-600 dark:text-zinc-400">
  <span class="h-1.5 w-1.5 rounded-full bg-zinc-400"></span>
  {{ status }}
</span>
{% endif %}
{% endmacro status_badge %}

{#
  Schedule status badge component
  Usage: {{ macros::schedule_badge(status=schedule.status) }}
  Renders a color-coded schedule status badge with border style
#}
{% macro schedule_badge(status) %}
{% if status == "active" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-emerald-500/50 bg-emerald-500/10 px-2.5 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-400">
  <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
  {{ status }}
</span>
{% elif status == "paused" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-amber-500/50 bg-amber-500/10 px-2.5 py-1 text-xs font-medium text-amber-600 dark:text-amber-400">
  <span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span>
  {{ status }}
</span>
{% elif status == "deleted" %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-red-500/50 bg-red-500/10 px-2.5 py-1 text-xs font-medium text-red-600 dark:text-red-400">
  <span class="h-1.5 w-1.5 rounded-full bg-red-500"></span>
  {{ status }}
</span>
{% else %}
<span class="inline-flex items-center gap-1.5 rounded-full border border-zinc-400/50 bg-zinc-500/10 px-2.5 py-1 text-xs font-medium text-zinc-600 dark:text-zinc-400">
  <span class="h-1.5 w-1.5 rounded-full bg-zinc-400"></span>
  {{ status }}
</span>
{% endif %}
{% endmacro schedule_badge %}

{#
  Schedule type badge component
  Usage: {{ macros::schedule_type_badge(schedule_type=schedule.schedule_type) }}
  Renders a styled schedule type badge with border style
#}
{% macro schedule_type_badge(schedule_type) %}
{% if schedule_type == "cron" %}
<span class="inline-flex items-center rounded-full border border-indigo-500/50 bg-indigo-500/10 px-2.5 py-1 text-xs font-medium text-indigo-600 dark:text-indigo-400">cron</span>
{% elif schedule_type == "interval" %}
<span class="inline-flex items-center rounded-full border border-cyan-500/50 bg-cyan-500/10 px-2.5 py-1 text-xs font-medium text-cyan-600 dark:text-cyan-400">interval</span>
{% else %}
<span class="inline-flex items-center rounded-full border border-zinc-400/50 bg-zinc-500/10 px-2.5 py-1 text-xs font-medium text-zinc-600 dark:text-zinc-400">{{ schedule_type }}</span>
{% endif %}
{% endmacro schedule_type_badge %}

{#
  Filterable column header with dropdown
  Usage: {{ macros::filterable_header(label="Workflow", column="workflow", endpoint="/api/invocations/filter-values") }}
  Renders a clickable table header that opens a filter dropdown
#}
{% macro filterable_header(label, column, endpoint) %}
<th class="px-4 py-3 text-left text-xs uppercase tracking-wider font-medium text-zinc-500 dark:text-zinc-500">
    <button
        type="button"
        class="column-filter-btn flex items-center gap-1.5 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors cursor-pointer"
        data-column="{{ column }}"
        data-endpoint="{{ endpoint }}"
    >
        {{ label }}
        <svg class="h-3 w-3 opacity-60" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
    </button>
</th>
{% endmacro filterable_header %}
